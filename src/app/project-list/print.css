/* 强制清除缓存标记 - v2.7 - 移动端优化 */

/* 移动端项目清单卡片样式 */
@media (max-width: 640px) {
  .mobile-project-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 16px;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  }

  .mobile-project-card .product-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 12px;
  }

  .mobile-project-card .product-image {
    width: 64px;
    height: 64px;
    object-fit: cover;
    border-radius: 4px;
    border: 1px solid #d1d5db;
  }

  .mobile-project-card .product-specs {
    background: #f9fafb;
    padding: 8px;
    border-radius: 4px;
    font-size: 12px;
    line-height: 1.4;
    color: #374151;
  }

  .mobile-project-card .price-quantity-section {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
  }

  .mobile-project-card .quantity-controls {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .mobile-project-card .quantity-btn {
    width: 32px;
    height: 32px;
    background: #f3f4f6;
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }

  .mobile-project-card .quantity-btn:hover {
    background: #e5e7eb;
  }

  .mobile-project-card .actions-section {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 12px;
    border-top: 1px solid #f3f4f6;
  }

  /* 移动端报价单头部样式 */
  .mobile-quotation-header {
    background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
    border: 1px solid #bfdbfe;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 12px;
  }

  .mobile-quotation-header .company-logo {
    height: 32px;
    width: auto;
    max-width: 80px;
    object-fit: contain;
  }

  /* 移动端客户信息卡片样式 */
  .mobile-customer-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 12px;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  }

  .mobile-customer-card .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
  }

  .mobile-customer-card .card-title {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .mobile-customer-card .card-icon {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 500;
  }

  .mobile-customer-card .to-icon {
    background: #dbeafe;
    color: #2563eb;
  }

  .mobile-customer-card .from-icon {
    background: #dcfce7;
    color: #16a34a;
  }

  .mobile-customer-card .field-group {
    margin-bottom: 12px;
  }

  .mobile-customer-card .field-label {
    font-size: 12px;
    color: #6b7280;
    margin-bottom: 4px;
    display: block;
  }

  .mobile-customer-card .field-value {
    font-size: 14px;
    color: #111827;
    background: #f9fafb;
    padding: 8px 12px;
    border-radius: 4px;
    border: 1px solid #e5e7eb;
  }

  .mobile-customer-card .field-input {
    width: 100%;
    font-size: 14px;
    background: #f9fafb;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    padding: 8px 12px;
  }

  .mobile-customer-card .field-input:focus {
    outline: none;
    border-color: #3b82f6;
    background: white;
  }

  .mobile-customer-card .grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
}

/* PDF导出模式样式 - 减少空白区域 */
.pdf-export-mode {
  width: 210mm !important;
  max-width: 210mm !important;
  height: auto !important;
  overflow: visible !important;
  margin: 0 !important;
  padding: 10mm !important;
  box-sizing: border-box !important;
}

.pdf-export-mode * {
  box-sizing: border-box !important;
}

.pdf-export-mode .print\\:hidden {
  display: none !important;
}

.pdf-export-mode button {
  display: none !important;
}

/* 价格自动缩放样式 - 打印模式 */
.price-auto-scale {
  display: inline-block !important;
  max-width: 100% !important;
  font-size: 10px !important;
  line-height: 1.2 !important;
  word-break: break-all !important;
  overflow-wrap: break-word !important;
}

.price-auto-scale[data-length="long"] {
  font-size: 9px !important;
  white-space: nowrap !important;
}

.price-auto-scale[data-length="very-long"] {
  font-size: 8px !important;
  white-space: nowrap !important;
}

.price-auto-scale[data-length="extra-long"] {
  font-size: 7px !important;
  white-space: nowrap !important;
}

.price-auto-scale[data-length="force-wrap"] {
  font-size: 7px !important;
  white-space: normal !important;
  word-break: break-all !important;
  line-height: 1.1 !important;
}

/* 强制报价单标题居中对齐 */
.quotation-header .text-center {
  text-align: center !important;
}

.quotation-header .inline-flex {
  display: inline-flex !important;
  align-items: center !important;
  gap: 24px !important; /* 强制间距 */
}

/* 强制LOGO尺寸 */
.quotation-header img {
  height: 40px !important;
  width: auto !important;
  max-height: 40px !important;
  max-width: 120px !important;
  object-fit: contain !important;
}

/* 打印样式 */
@media print {
  /* 隐藏不需要打印的元素 */
  .print\\:hidden {
    display: none !important;
  }

  /* 显示打印时需要的元素 */
  .print\\:inline {
    display: inline !important;
  }

  .print\\:block {
    display: block !important;
  }

  /* 隐藏图片加载错误 */
  img[src=""] {
    display: none !important;
  }

  /* 确保错误的图片不显示 */
  img:not([src]),
  img[src=""],
  img[src*="undefined"],
  img[src*="null"] {
    display: none !important;
  }
  
  /* 页面设置 */
  @page {
    margin: 1cm;
    size: A4;
    /* 禁用页眉页脚，避免额外空间占用 */
  }
  
  /* 基本样式重置 */
  * {
    -webkit-print-color-adjust: exact !important;
    color-adjust: exact !important;
    font-family: "Microsoft YaHei", "PingFang SC", "Helvetica Neue", Arial, sans-serif !important;
  }

  body {
    font-size: 12px !important;
    line-height: 1.4 !important;
    color: black !important;
    background: white !important;
    font-family: "Microsoft YaHei", "PingFang SC", "Helvetica Neue", Arial, sans-serif !important;
  }
  
  /* 隐藏导航栏和其他页面元素 */
  nav,
  .navbar,
  header,
  .print\\:hidden,
  button:not(.print\\:inline):not(.print\\:block) {
    display: none !important;
  }

  /* 隐藏页面头部和操作按钮区域 */
  main > div:first-child {
    display: none !important;
  }

  /* 隐藏页面头部和导航 */
  body > div > nav {
    display: none !important;
  }

  /* 隐藏页面头部操作区域 */
  body > div > main > div:first-child {
    display: none !important;
  }

  /* 隐藏模态框 */
  .fixed.inset-0 {
    display: none !important;
  }

  /* 确保只显示报价单内容 */
  #quotation-content {
    display: block !important;
    margin: 0 !important;
    padding: 20px !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    background: white !important;
  }

  /* 确保报价单内容完全可见 */
  #quotation-content,
  #quotation-content * {
    visibility: visible !important;
  }

  /* 紧凑布局 - 减少所有内部间距 */
  #quotation-content > * {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  #quotation-content .p-4 {
    padding: 8px !important;
  }
  
  /* 报价单容器 */
  .quotation-header {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* 客户信息区域 */
  .customer-info {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* 产品表格容器 - 打印时移除滚动条 */
  .overflow-x-auto {
    margin-top: 0 !important;
    padding-top: 0 !important;
    overflow: visible !important;
    overflow-x: visible !important;
  }
  
  /* 表格样式 */
  table {
    width: 100% !important;
    border-collapse: collapse !important;
    margin: 0 !important;
    margin-top: 0 !important;
  }

  /* 表格前的容器 */
  .quotation-table {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  /* 打印时的表格列宽设置 - 删除外观颜色和控制方式列后的调整 */
  .quotation-table {
    table-layout: fixed !important;
    width: 100% !important;
  }

  .quotation-table th:nth-child(1),
  .quotation-table td:nth-child(1) { width: 3% !important; } /* 序号 */

  .quotation-table th:nth-child(2),
  .quotation-table td:nth-child(2) { width: 8% !important; } /* 使用区域 */

  .quotation-table th:nth-child(3),
  .quotation-table td:nth-child(3) { width: 5% !important; } /* 品牌 */

  .quotation-table th:nth-child(4),
  .quotation-table td:nth-child(4) { width: 8% !important; } /* 图片 */

  .quotation-table th:nth-child(5),
  .quotation-table td:nth-child(5) { width: 30% !important; } /* 技术参数 */

  .quotation-table th:nth-child(6),
  .quotation-table td:nth-child(6) { width: 15% !important; } /* 型号 */

  .quotation-table th:nth-child(7),
  .quotation-table td:nth-child(7) { width: 7% !important; } /* 单价 */

  .quotation-table th:nth-child(8),
  .quotation-table td:nth-child(8) { width: 5% !important; } /* 数量 */

  .quotation-table th:nth-child(9),
  .quotation-table td:nth-child(9) { width: 5% !important; } /* 单位 */

  .quotation-table th:nth-child(10),
  .quotation-table td:nth-child(10) {
    width: 8% !important;
    min-width: 8% !important;
    max-width: 8% !important;
  } /* 小计 */

  .quotation-table th:nth-child(11),
  .quotation-table td:nth-child(11) {
    width: 6% !important;
    min-width: 6% !important;
    max-width: 6% !important;
  } /* 备注 */

  /* 操作列在打印时设为0%并隐藏 */
  .quotation-table th:nth-child(12), .quotation-table td:nth-child(12) {
    width: 0% !important;
    display: none !important;
  }
  
  th, td {
    border: 1px solid black !important;
    padding: 4px !important;
    font-size: 10px !important;
    line-height: 1.2 !important;
    height: auto !important;
    vertical-align: middle !important;
    text-align: center !important;
  }

  /* 只调整产品表格内容的字体大小 - 覆盖12px body字体 */
  .quotation-table td {
    font-size: 8px !important;
  }

  /* 确保表格内容不受12px body字体影响 */
  .quotation-table td * {
    font-size: inherit !important;
  }

  /* 技术参数列特殊处理 - 覆盖inherit */
  .quotation-table td:nth-child(5) * {
    font-size: 10px !important;
  }

  /* 订货代码列特殊处理 - 覆盖inherit */
  .quotation-table td:nth-child(6) * {
    font-size: 10px !important;
  }

  /* 表格行自适应高度 */
  .quotation-table tr {
    height: auto !important;
  }
  
  th {
    background-color: #f5f5f5 !important;
    font-weight: bold !important;
  }

  /* 打印时修复使用区域标题字体大小 */
  .quotation-table th:nth-child(2) div {
    font-size: 10px !important;
    line-height: 1.2 !important;
  }
  
  /* 图片样式 - 确保不超出表格边界 */
  .quotation-table img {
    max-width: 40px !important;
    max-height: 40px !important;
    width: 40px !important;
    height: 40px !important;
    object-fit: cover !important;
    border-radius: 2px !important;
    display: block !important;
    margin: 0 auto !important;
  }

  /* 图片容器 */
  .quotation-table td:nth-child(4) {
    padding: 2px !important;
    text-align: center !important;
    vertical-align: middle !important;
  }

  /* 备注列样式 - 窄列优化，强制宽度 */
  .quotation-table td:nth-child(11) {
    width: 6% !important;
    min-width: 6% !important;
    max-width: 6% !important;
    word-wrap: break-word !important;
    word-break: break-all !important;
    white-space: normal !important;
    font-size: 7px !important;
    line-height: 1.0 !important;
    padding: 1px !important;
    vertical-align: middle !important;
    text-align: left !important;
  }

  /* 小计列样式 - 确保宽度正确 */
  .quotation-table td:nth-child(10) {
    width: 8% !important;
    min-width: 8% !important;
    max-width: 8% !important;
  }
  
  /* 避免分页 - 但允许表格和头部在同一页 */
  .quotation-header {
    page-break-after: avoid !important;
    page-break-inside: avoid !important;
  }

  table {
    page-break-before: avoid !important;
    page-break-inside: auto !important;
  }

  tr {
    page-break-inside: avoid !important;
  }

  /* 强制表格紧跟头部 */
  .overflow-x-auto {
    page-break-before: avoid !important;
  }
  
  /* 标题样式 */
  h1, h2 {
    margin: 0 !important;
    padding: 0 !important;
  }
  
  h1 {
    font-size: 16px !important;
    font-weight: bold !important;
  }
  
  h2 {
    font-size: 14px !important;
    font-weight: bold !important;
  }
  
  /* 总计样式 */
  .total-section {
    margin-top: 10px !important;
    padding-top: 10px !important;
  }
  
  /* 说明文字 */
  .notes {
    font-size: 10px !important;
    line-height: 1.3 !important;
    margin-top: 10px !important;
  }

  /* 报价说明区域文字左对齐 */
  .quotation-notes {
    text-align: left !important;
  }

  .quotation-notes .whitespace-pre-line {
    text-align: left !important;
  }

  .quotation-notes .whitespace-pre-line div {
    text-align: left !important;
  }

  /* 报价单表头公司信息左对齐 - 使用Flexbox布局 */
  .customer-info .flex.gap-4 {
    text-align: left !important;
  }

  .customer-info .flex.gap-4 .space-y-1 {
    text-align: left !important;
  }

  .customer-info .flex.gap-4 .flex.items-center {
    text-align: left !important;
    justify-content: flex-start !important;
  }

  .customer-info .flex.gap-4 .flex.items-center span {
    text-align: left !important;
  }

  /* To和From英文单词左对齐 */
  .customer-info .font-medium.w-12 {
    text-align: left !important;
    justify-self: flex-start !important;
  }

  /* 客户信息字段标签左对齐：客户名称:、项目名称:、联系人:、名称:、联系人: */
  .customer-info .font-medium.w-16 {
    text-align: left !important;
    justify-content: flex-start !important;
    display: flex !important;
    align-items: center !important;
  }

  /* 强制打印时客户信息字段左对齐 */
  @media print {
    .customer-info .font-medium.w-16 {
      text-align: left !important;
      justify-content: flex-start !important;
      display: flex !important;
      align-items: center !important;
    }

    /* 夸克浏览器兼容性：只隐藏数量列div容器内的按钮和输入框 */
    .quotation-table td div.flex button,
    .quotation-table td div.flex input[type="text"] {
      display: none !important;
      visibility: hidden !important;
    }

    /* 确保数量显示的span元素可见 */
    .quotation-table td span {
      display: inline !important;
      visibility: visible !important;
    }
  }

  /* 移除多余的边框线，防止超出表格范围 */
  .overflow-x-auto {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
  }

  .quotation-table {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
  }

  /* 确保表格容器不产生额外边框 */
  .quotation-table tbody,
  .quotation-table thead {
    border: none !important;
    outline: none !important;
  }

  /* 移除可能的额外边框 */
  .total-summary-table {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
  }

  /* 强制移除所有可能的容器边框和阴影 */
  .quotation-preview .overflow-x-auto,
  .quotation-preview .quotation-table,
  .quotation-preview .total-summary-table {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    background: transparent !important;
  }

  /* 移除表格容器的所有可能边框 */
  .quotation-preview .overflow-x-auto::before,
  .quotation-preview .overflow-x-auto::after {
    display: none !important;
  }

  /* 确保表格容器内部没有边框 */
  .quotation-preview .overflow-x-auto > *,
  .quotation-preview .quotation-table > *,
  .quotation-preview .total-summary-table > * {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
  }
}

/* 通用字体样式 - 确保中文正确显示 */
#quotation-content {
  font-family: "Microsoft YaHei", "PingFang SC", "Helvetica Neue", Arial, sans-serif;
}

#quotation-content * {
  font-family: inherit;
}

/* 避免CSS兼容性问题 */
.quotation-content table {
  border-collapse: collapse;
}

.quotation-content th,
.quotation-content td {
  border: 1px solid black !important;
}

/* PDF导出专用样式 */
.pdf-export-mode {
  background: white !important;
  color: black !important;
}

.pdf-export-mode * {
  background: transparent !important;
  box-shadow: none !important;
  text-shadow: none !important;
  font-family: "Microsoft YaHei", "PingFang SC", Arial, sans-serif !important;
}

.pdf-export-mode table {
  border-collapse: collapse !important;
}

.pdf-export-mode th,
.pdf-export-mode td {
  border: 1px solid black !important;
  padding: 8px !important;
}

.pdf-export-mode .bg-gray-50 {
  background: #f5f5f5 !important;
}

/* 优化浏览器打印样式 */
@media print {
  /* 隐藏页面其他元素 */
  nav,
  .navbar,
  header,
  footer,
  .sidebar,
  .print\\:hidden,
  button,
  input[type="button"],
  input[type="submit"],
  .no-print {
    display: none !important;
  }

  /* 显示打印专用元素 */
  .print\\:inline {
    display: inline !important;
  }

  .print\\:block {
    display: block !important;
  }

  /* 确保报价单内容占满页面，左侧不动，右侧扩展 */
  #quotation-content {
    margin: 0 auto !important;
    padding: 3mm 3mm 3mm 3mm !important;  /* 恢复左侧内边距到3mm */
    box-shadow: none !important;
    border-radius: 0 !important;
    background: white !important;
    color: black !important;
    font-size: 12px !important;
    line-height: 1.2 !important;
    height: auto !important;
    min-height: auto !important;
    max-width: 100% !important;  /* 恢复容器宽度 */
    width: 100% !important;
    box-sizing: border-box !important;
    text-align: center !important;
  }

  /* 表格容器：左侧不动，右侧稍微扩展 */
  #quotation-content .overflow-x-auto {
    margin: 0 !important;
    margin-left: 0 !important;
    padding: 0 !important;
    overflow: visible !important;
    overflow-x: visible !important;
    width: 102% !important;  /* 稍微增加宽度，让右边框向右移动 */
    text-align: center !important;
  }

  /* 强制紧凑布局 */
  #quotation-content .quotation-header {
    margin: 0 !important;
    padding: 5px !important;
  }

  #quotation-content .customer-info {
    margin: 0 !important;
    padding: 5px !important;
  }



  /* 强制表格在第一页显示 */
  .quotation-table {
    page-break-before: avoid !important;
    page-break-after: auto !important;
  }

  /* 减少所有间距 */
  .space-y-1 > * + * {
    margin-top: 2px !important;
  }

  .space-y-2 > * + * {
    margin-top: 4px !important;
  }

  .mb-4 {
    margin-bottom: 8px !important;
  }

  .mt-3 {
    margin-top: 6px !important;
  }

  /* 表格样式优化 */
  table {
    border-collapse: collapse !important;
    width: 100% !important;
    margin: 0 !important;
    page-break-inside: avoid !important;
  }

  th, td {
    border: 1px solid black !important;
    padding: 6px !important;
    font-size: 11px !important;
    line-height: 1.3 !important;
    vertical-align: middle !important;
    text-align: center !important;
  }

  /* 只调整产品表格内容的字体大小 - 覆盖12px body字体 */
  .quotation-table td {
    font-size: 10px !important;
  }

  /* 确保表格内容不受12px body字体影响 */
  .quotation-table td * {
    font-size: inherit !important;
  }

  th {
    background: #f5f5f5 !important;
    font-weight: bold !important;
  }

  /* 图片优化 - 打印时更小尺寸 */
  img {
    max-width: 40px !important;
    max-height: 40px !important;
    width: 40px !important;
    height: 40px !important;
    object-fit: cover !important;
    border-radius: 2px !important;
  }

  /* 页面设置 - 减少页面边距，增加内容区域 */
  @page {
    margin: 3mm;  /* 减少边距从5mm到3mm，增加可用宽度 */
    size: A4;
    /* 禁用页眉页脚，避免额外空间占用 */
  }

  /* 避免分页断行 */
  .quotation-header,
  .quotation-footer {
    page-break-inside: avoid !important;
  }

  /* 强制所有内容在一页内显示 */
  body, html {
    page-break-inside: avoid !important;
    page-break-after: avoid !important;
    page-break-before: avoid !important;
  }

  /* 主要内容容器强制单页 */
  main, .quotation-preview, #quotation-content {
    page-break-inside: avoid !important;
    page-break-after: avoid !important;
    page-break-before: avoid !important;
    height: auto !important;
    max-height: none !important;
    overflow: visible !important;
  }

  /* 表格和相关元素强制不分页 */
  .quotation-table,
  .total-section,
  .quotation-notes,
  .customer-info {
    page-break-inside: avoid !important;
    page-break-after: avoid !important;
    page-break-before: avoid !important;
  }

  /* 字体设置 */
  * {
    font-family: "Microsoft YaHei", "PingFang SC", Arial, sans-serif !important;
    color: black !important;
  }
}

/* 移动端特定的打印优化 - 修复嵌套媒体查询问题 */
@media print and (max-width: 768px) {
  /* 移动端打印时强制更小的边距，避免空白页 */
  @page {
    margin: 3mm !important;
    size: A4 !important;
  }

  /* 移动端打印时减少所有元素的间距，防止内容溢出到第二页 */
  body {
    font-size: 9px !important;
    line-height: 1.1 !important;
    margin: 0 !important;
    padding: 0 !important;
    height: auto !important;
    max-height: 285mm !important; /* A4高度减去边距，防止溢出 */
    overflow: visible !important;
  }

  /* 移动端打印时强制显示表格，隐藏卡片 */
  .sm\\:hidden {
    display: none !important;
  }

  .hidden.sm\\:block {
    display: block !important;
  }

  /* 移动端打印时确保表格容器可见 */
  .table-container {
    display: block !important;
    overflow: visible !important;
  }

  /* 移动端打印时压缩页眉 */
  .quotation-header {
    padding: 3px !important;
    margin: 1px 0 !important;
    font-size: 9px !important;
    line-height: 1.1 !important;
  }

  /* 移动端打印时压缩客户信息 */
  .customer-info {
    padding: 3px !important;
    margin: 2px 0 !important;
    font-size: 8px !important;
    line-height: 1.1 !important;
  }

  /* 移动端打印时压缩表格 */
  .quotation-table {
    font-size: 7px !important;
    margin: 1px 0 !important;
    border-collapse: collapse !important;
    width: 100% !important;
  }

  .quotation-table th,
  .quotation-table td {
    padding: 2px 1px !important;
    font-size: 7px !important;
    line-height: 1.1 !important;
    border: 1px solid #000 !important;
  }

  /* 移动端打印时压缩总计区域 */
  .total-section {
    padding: 3px !important;
    margin: 2px 0 !important;
    font-size: 8px !important;
    line-height: 1.1 !important;
  }

  /* 移动端打印时压缩报价说明 */
  .quotation-notes {
    padding: 3px !important;
    margin: 2px 0 !important;
    font-size: 8px !important;
    line-height: 1.2 !important;
  }

  /* 移动端打印时优化内容布局 */
  html, body, main, .quotation-preview, #quotation-content {
    height: auto !important;
    max-height: 280mm !important; /* 严格限制最大高度，防止第二页 */
    overflow: hidden !important; /* 隐藏溢出内容 */
    page-break-inside: avoid !important;
    page-break-after: avoid !important;
  }

  /* 移动端打印时严格控制内容区域 */
  #quotation-content {
    max-height: 270mm !important;
    overflow: hidden !important;
    box-sizing: border-box !important;
  }

  /* 移动端打印时压缩所有间距 */
  * {
    margin: 0 !important;
    padding: 0 !important;
  }

  /* 移动端打印时只保留必要的内边距 */
  .quotation-header {
    padding: 2px !important;
  }

  .customer-info {
    padding: 2px !important;
  }

  .quotation-table {
    margin: 0 !important;
  }

  .total-section {
    padding: 2px !important;
  }

  .quotation-notes {
    padding: 2px !important;
    max-height: 30mm !important;
    overflow: hidden !important;
  }

  /* 移动端打印时图片优化 */
  img {
    max-width: 25px !important;
    max-height: 25px !important;
    width: 25px !important;
    height: 25px !important;
  }
}

/* 移动端打印时的额外优化 - 确保表格显示 */
@media print {
  /* 在所有打印情况下，移动端都显示表格 */
  @media (max-width: 768px) {
    .sm\\:hidden.print\\:hidden {
      display: none !important;
    }

    .hidden.sm\\:block.print\\:block {
      display: block !important;
    }

    /* 确保表格在移动端打印时可见 */
    .quotation-table {
      display: table !important;
      width: 100% !important;
      border-collapse: collapse !important;
    }

    .quotation-table thead {
      display: table-header-group !important;
    }

    .quotation-table tbody {
      display: table-row-group !important;
    }

    .quotation-table tr {
      display: table-row !important;
    }

    .quotation-table th,
    .quotation-table td {
      display: table-cell !important;
    }
  }
}

/* 页面预览样式 - 使其更接近打印效果 */
.quotation-preview {
  font-family: "Microsoft YaHei", "PingFang SC", Arial, sans-serif;
  font-size: 12px;  /* 减小预览窗口的基础字体大小 */
  line-height: 1.3;  /* 调整行高 */
  max-width: 95%; /* 增加表格宽度，减少两侧空白 */
  margin: 0 auto;
  background: white;
}

.quotation-preview .quotation-header {
  padding: 20px;
}

.quotation-preview table,
.quotation-table {
  border-collapse: collapse;
  width: 100%;
  font-size: 10px;  /* 减小预览窗口表格的字体大小 */
}

.quotation-preview th,
.quotation-preview td,
.quotation-table th,
.quotation-table td {
  border: 1px solid black !important;
  padding: 8px;
  text-align: center;
  vertical-align: middle;
}

/* 技术参数列样式 - 标题居中，内容左对齐 */
.quotation-table th:nth-child(5) {
  text-align: center !important;
}

.quotation-table td:nth-child(5) {
  text-align: left !important;
}

/* 备注列：标题居中，内容左对齐 */
.quotation-table th:nth-child(11) {
  text-align: center !important;
}

.quotation-table td:nth-child(11) {
  text-align: left !important;
}

.quotation-preview th {
  background-color: #f5f5f5 !important;
  font-weight: bold;
  font-size: 9px;  /* 预览窗口表头字体大小 */
}

.quotation-preview td {
  font-size: 8px;  /* 预览窗口表格内容字体大小 */
}

/* 预览模式下使用区域列字体大小修正 - 第2列 */
.quotation-preview td:nth-child(2) {
  font-size: 8px !important;  /* 预览模式使用区域列字体大小 */
}

.quotation-preview td:nth-child(2) * {
  font-size: 8px !important;  /* 预览模式使用区域列内所有元素字体大小 */
}

/* 保持原有的quotation-table样式不变（用于实际打印） */
.quotation-table th {
  background-color: #f5f5f5 !important;
  font-weight: bold;
  font-size: 11px;  /* 恢复表头字体大小 */
}

/* 修复使用区域标题字体大小 - 确保div元素也使用相同字体大小 */
.quotation-table th:nth-child(2) div {
  font-size: 11px !important;
  line-height: 1.2 !important;
}

.quotation-preview th:nth-child(2) div {
  font-size: 9px !important;
  line-height: 1.2 !important;
}

.quotation-table td {
  font-size: 8px;  /* 只调整表格内容字体大小 */
}

.quotation-preview img {
  max-width: 30px;
  max-height: 30px;
  width: 30px;
  height: 30px;
  object-fit: cover;
  border-radius: 2px;
  display: block;
  margin: 0 auto;
}

/* 客户信息区域样式优化 */
.quotation-preview .customer-info {
  font-size: 10px;  /* 减小预览窗口客户信息字体大小 */
  line-height: 1.4;  /* 调整行高 */
}

.quotation-preview .customer-info .field-label {
  font-weight: 500;
}

.quotation-preview .customer-info .field-value {
  min-height: 20px;
  display: inline-block;
  padding-bottom: 2px;
}

/* 新模板样式 */
.quotation-preview .customer-info input,
.quotation-preview .customer-info span {
  padding-bottom: 2px;
  min-height: 18px;
}

.quotation-preview .customer-info input {
  background: transparent;
  outline: none;
}

/* 总计区域样式 */
.quotation-preview .total-section {
  padding: 20px;
  font-size: 10px;  /* 减小预览窗口总计区域字体大小 */
}

.quotation-preview .total-amount {
  font-size: 10px;  /* 改为10px总计金额字体大小 */
  font-weight: bold;
}

/* 技术参数样式 */
.quotation-preview .multiline-cell {
  font-size: 7px !important;  /* 预览窗口技术参数字体大小 */
  line-height: 1.1 !important;
  text-align: left !important;
}

/* 实际打印时的技术参数样式 - 只调整产品表格内的技术参数 */
@media print {
  .quotation-table .multiline-cell {
    font-size: 10px !important;  /* 产品表格内技术参数字体大小 */
    line-height: 1.1 !important;
    text-align: left !important;
  }

  /* 实际打印时的技术参数列样式 - 第5列 */
  .quotation-table td:nth-child(5) {
    font-size: 10px !important;  /* 技术参数列字体大小 */
    line-height: 1.1 !important;
    text-align: left !important;
  }

  .quotation-table td:nth-child(5) * {
    font-size: 10px !important;  /* 技术参数列内所有元素字体大小 */
    line-height: 1.1 !important;
  }

  /* 覆盖globals.css中的技术参数列样式 */
  .quotation-table td:nth-child(5) div {
    font-size: 10px !important;  /* 技术参数列div字体大小 */
    line-height: 1.1 !important;
  }

  .quotation-table td:nth-child(5) div * {
    font-size: 10px !important;  /* 技术参数列div内所有元素字体大小 */
    line-height: 1.1 !important;
  }

  /* 使用更高权重的选择器强制覆盖技术参数列字体 */
  body .quotation-table td:nth-child(5),
  body .quotation-table td:nth-child(5) *,
  body .quotation-table td:nth-child(5) div,
  body .quotation-table td:nth-child(5) div * {
    font-size: 10px !important;
    line-height: 1.1 !important;
  }

  /* 实际打印时的订货代码列样式 - 第6列 */
  .quotation-table td:nth-child(6) {
    font-size: 10px !important;  /* 订货代码列字体大小 */
    line-height: 1.2 !important;
    text-align: center !important;
  }

  .quotation-table td:nth-child(6) * {
    font-size: 10px !important;  /* 订货代码列内所有元素字体大小 */
    line-height: 1.2 !important;
  }

  /* 使用更高权重的选择器强制覆盖订货代码列字体 */
  body .quotation-table td:nth-child(6),
  body .quotation-table td:nth-child(6) *,
  body .quotation-table td:nth-child(6) textarea,
  body .quotation-table td:nth-child(6) span {
    font-size: 10px !important;
    line-height: 1.2 !important;
  }

  /* 打印模式下的价格自动缩放 */
  .price-auto-scale {
    display: inline-block !important;
    max-width: 100% !important;
    font-size: 10px !important;
    line-height: 1.2 !important;
    word-break: break-all !important;
    overflow-wrap: break-word !important;
  }

  .price-auto-scale[data-length="long"] {
    font-size: 9px !important;
    white-space: nowrap !important;
  }

  .price-auto-scale[data-length="very-long"] {
    font-size: 8px !important;
    white-space: nowrap !important;
  }

  .price-auto-scale[data-length="extra-long"] {
    font-size: 7px !important;
    white-space: nowrap !important;
  }

  .price-auto-scale[data-length="force-wrap"] {
    font-size: 7px !important;
    white-space: normal !important;
    word-break: break-all !important;
    line-height: 1.1 !important;
  }

  /* 单价和小计列的价格缩放 */
  .quotation-table td:nth-child(7) .price-auto-scale,
  .quotation-table td:nth-child(10) .price-auto-scale {
    font-size: 10px !important;
  }

  .quotation-table td:nth-child(7) .price-auto-scale[data-length="long"],
  .quotation-table td:nth-child(10) .price-auto-scale[data-length="long"] {
    font-size: 9px !important;
    white-space: nowrap !important;
  }

  .quotation-table td:nth-child(7) .price-auto-scale[data-length="very-long"],
  .quotation-table td:nth-child(10) .price-auto-scale[data-length="very-long"] {
    font-size: 8px !important;
    white-space: nowrap !important;
  }

  .quotation-table td:nth-child(7) .price-auto-scale[data-length="extra-long"],
  .quotation-table td:nth-child(10) .price-auto-scale[data-length="extra-long"] {
    font-size: 7px !important;
    white-space: nowrap !important;
  }

  .quotation-table td:nth-child(7) .price-auto-scale[data-length="force-wrap"],
  .quotation-table td:nth-child(10) .price-auto-scale[data-length="force-wrap"] {
    font-size: 7px !important;
    white-space: normal !important;
    word-break: break-all !important;
    line-height: 1.1 !important;
  }

  /* 实际打印时的备注列样式 - 改为8px字体大小 */
  .quotation-table td:nth-child(11) {
    font-size: 8px !important;  /* 产品表格内备注字体大小 */
    line-height: 1.0 !important;
    text-align: left !important;
  }

  /* 实际打印时的使用区域列样式 - 第2列 */
  .quotation-table td:nth-child(2) {
    font-size: 10px !important;  /* 使用区域列字体大小 */
    line-height: 1.1 !important;
    text-align: center !important;
  }

  .quotation-table td:nth-child(2) * {
    font-size: 10px !important;  /* 使用区域列内所有元素字体大小 */
    line-height: 1.1 !important;
  }

  .quotation-table td:nth-child(2) span {
    font-size: 10px !important;  /* 使用区域列span字体大小 */
    line-height: 1.1 !important;
  }
}

/* 报价说明样式 */
.quotation-preview .quotation-notes {
  font-size: 9px;  /* 减小预览窗口报价说明字体大小 */
  line-height: 1.3;  /* 调整行高 */
  margin-top: 15px;
}

/* 实际打印时的报价说明样式 - 确保10px字体大小 */
@media print {
  .quotation-notes {
    font-size: 10px !important;  /* 报价说明字体大小 */
    line-height: 1.3 !important;
  }

  .quotation-notes * {
    font-size: 10px !important;  /* 报价说明内所有元素字体大小 */
  }

  /* 实际打印时的合计金额样式 */
  .total-amount {
    font-size: 10px !important;  /* 合计金额字体大小 */
    font-weight: bold !important;
  }

  .total-summary-table .text-sm {
    font-size: 10px !important;  /* 合计金额区域所有文字 */
  }
}

/* 表格列宽优化 - 删除外观颜色和控制方式列后的调整 */
.quotation-table th:nth-child(1),
.quotation-table td:nth-child(1) {
  width: 4%; /* 序号 */
}

.quotation-table th:nth-child(2),
.quotation-table td:nth-child(2) {
  width: 7%; /* 使用区域 */
}

.quotation-table th:nth-child(3),
.quotation-table td:nth-child(3) {
  width: 7%; /* 品牌 */
}

.quotation-table th:nth-child(4),
.quotation-table td:nth-child(4) {
  width: 6%; /* 图片 */
}

.quotation-table th:nth-child(5),
.quotation-table td:nth-child(5) {
  width: 40%; /* 技术参数 - 大幅增加宽度 */
  word-wrap: break-word !important;
  word-break: break-all !important;
  white-space: normal !important;
  vertical-align: middle !important;
  height: auto !important;
}

.quotation-table th:nth-child(6),
.quotation-table td:nth-child(6) {
  width: 10%; /* 型号 */
  word-wrap: break-word !important;
  word-break: break-all !important;
  white-space: normal !important;
  vertical-align: middle !important;
  text-align: center !important;
}

.quotation-table th:nth-child(7),
.quotation-table td:nth-child(7) {
  width: 8%; /* 单价 */
}

.quotation-table th:nth-child(8),
.quotation-table td:nth-child(8) {
  width: 5%; /* 数量 */
}

.quotation-table th:nth-child(9),
.quotation-table td:nth-child(9) {
  width: 5%; /* 单位 */
}

.quotation-table th:nth-child(10),
.quotation-table td:nth-child(10) {
  width: 8%; /* 小计 */
}

.quotation-table th:nth-child(11),
.quotation-table td:nth-child(11) {
  width: 6%; /* 备注 */
}

/* 总计表格列宽 */
.total-table .total-amount-col {
  width: 8%; /* 对应小计列 */
}

.total-table .total-spacer-1 {
  width: 6%; /* 对应备注列 */
}

.total-table .total-spacer-2 {
  width: 4%; /* 对应操作列 */
}

/* 总计表格样式 */
.total-table {
  border-collapse: separate !important;
  border-spacing: 0 !important;
}

.total-table td {
  border: none !important;
  padding: 4px !important;
}

.total-table .total-label-col {
  padding-right: 20px !important;
}

/* 合计金额行样式 */
.quotation-table .border-0 {
  border: none !important;
}

/* 合计金额独立表格样式 */
.total-summary-table {
  border-collapse: separate !important;
  border-spacing: 0 !important;
}

.total-summary-table td {
  border: none !important;
  padding: 2px 4px !important;
  height: auto !important;
  vertical-align: middle !important;
}

/* 合计金额表格列宽 - 与产品表格保持一致 */
.total-summary-table td:nth-child(1) { width: 3% !important; } /* 序号 */
.total-summary-table td:nth-child(2) { width: 6% !important; } /* 使用区域 */
.total-summary-table td:nth-child(3) { width: 3% !important; } /* 品牌 */
.total-summary-table td:nth-child(4) { width: 7% !important; } /* 图片 */
.total-summary-table td:nth-child(5) { width: 26% !important; } /* 技术参数 */
.total-summary-table td:nth-child(6) { width: 15% !important; } /* 型号 */
.total-summary-table td:nth-child(7) { width: 7% !important; } /* 单价 */
.total-summary-table td:nth-child(8) { width: 6% !important; } /* 数量 */
.total-summary-table td:nth-child(9) { width: 9% !important; } /* 单位 - 增加宽度给合计金额文字 */
.total-summary-table td:nth-child(10) { width: 8% !important; } /* 小计 */
.total-summary-table td:nth-child(11) { width: 10% !important; } /* 备注 */

/* 合计金额文字横向显示 */
.total-summary-table .total-label {
  white-space: nowrap !important;
  display: inline-block !important;
  text-align: right !important;
  width: 100% !important;
}

/* 合计金额数值与小计列对齐 */
.total-summary-table td:nth-child(10) {
  text-align: left !important;
  padding-left: 4px !important;
}

/* 优惠金额样式 */
.total-summary-table .discount-amount {
  color: #dc2626 !important; /* 红色显示优惠金额 */
}

/* 最终金额样式 */
.total-summary-table .final-amount {
  font-weight: bold !important;
  color: #059669 !important; /* 绿色显示最终金额 */
}

/* 输入框placeholder文字样式优化 */
.quotation-table input[type="text"] {
  font-size: 12px !important;
  padding: 1px 2px !important;
  min-width: 0 !important;
  width: 100% !important;
}

/* 确保正常页面显示时输入框可见且可交互 */
@media screen {
  .quotation-preview input[type="text"] {
    display: block !important;
    visibility: visible !important;
  }

  .quotation-preview textarea {
    display: block !important;
    visibility: visible !important;
  }

  /* 确保透明背景的输入框有最小的可见边框 */
  .quotation-table input[type="text"].bg-transparent,
  .quotation-table textarea.bg-transparent {
    background: rgba(255, 255, 255, 0.8) !important;
    border: 1px solid rgba(209, 213, 219, 0.5) !important;
    min-height: 1.5em !important;
  }

  /* 聚焦时增强可见性 */
  .quotation-table input[type="text"]:focus,
  .quotation-table textarea:focus {
    background: white !important;
    border-color: #3b82f6 !important;
    outline: none !important;
  }
}

/* 确保正常页面显示时placeholder可见 */
@media screen {
  .quotation-table input[type="text"]::placeholder {
    font-size: 12px !important;
    color: #9ca3af !important;
    opacity: 1 !important;
  }

  .quotation-table textarea::placeholder {
    font-size: 12px !important;
    color: #9ca3af !important;
    opacity: 1 !important;
  }

  /* 使用区域列的placeholder使用更小的字体 */
  .quotation-table td:nth-child(2) textarea::placeholder {
    font-size: 10px !important;
    color: #9ca3af !important;
    opacity: 1 !important;
    line-height: 1.1 !important;
  }

  /* 确保所有输入框和textarea的placeholder在正常页面中可见 */
  input::placeholder {
    color: #9ca3af !important;
    opacity: 1 !important;
  }

  textarea::placeholder {
    color: #9ca3af !important;
    opacity: 1 !important;
  }
}

/* 打印时隐藏所有输入框的placeholder */
@media print {
  input::placeholder {
    color: transparent !important;
    opacity: 0 !important;
  }

  textarea::placeholder {
    color: transparent !important;
    opacity: 0 !important;
  }
}

/* 只在真正的打印预览模式下隐藏输入框，显示span */
/* 注意：这些规则现在只在打印时或特定的打印预览状态下生效 */
@media print {
  .quotation-preview input[type="text"] {
    display: none !important;
  }

  .quotation-preview textarea {
    display: none !important;
  }

  .quotation-preview .print\\:inline {
    display: inline !important;
  }

  .quotation-preview .print\\:hidden {
    display: none !important;
  }
}

/* 为真正的打印预览模式添加特定类名控制 */
.print-preview-mode input[type="text"] {
  display: none !important;
}

.print-preview-mode textarea {
  display: none !important;
}

.print-preview-mode .print\\:inline {
  display: inline !important;
}

.print-preview-mode .print\\:hidden {
  display: none !important;
}

/* 打印时总计表格样式 */
@media print {
  /* 强制打印时的列宽设置 - 最高优先级 */
  .quotation-table th:nth-child(3),
  .quotation-table td:nth-child(3) {
    width: 5% !important;
    min-width: 5% !important;
    max-width: 5% !important;
  } /* 品牌 */

  .quotation-table th:nth-child(4),
  .quotation-table td:nth-child(4) {
    width: 8% !important;
    min-width: 8% !important;
    max-width: 8% !important;
  } /* 图片 */

  .quotation-table th:nth-child(5),
  .quotation-table td:nth-child(5) {
    width: 30% !important;
    min-width: 30% !important;
    max-width: 30% !important;
  } /* 技术参数 */

  .quotation-table th:nth-child(8),
  .quotation-table td:nth-child(8) {
    width: 5% !important;
    min-width: 5% !important;
    max-width: 5% !important;
  } /* 数量 */

  .quotation-table th:nth-child(9),
  .quotation-table td:nth-child(9) {
    width: 5% !important;
    min-width: 5% !important;
    max-width: 5% !important;
  } /* 单位 */

  .quotation-table th:nth-child(10),
  .quotation-table td:nth-child(10) {
    width: 8% !important;
    min-width: 8% !important;
    max-width: 8% !important;
  } /* 小计 */

  .quotation-table th:nth-child(11),
  .quotation-table td:nth-child(11) {
    width: 6% !important;
    min-width: 6% !important;
    max-width: 6% !important;
  } /* 备注 */

  /* 额外的强制规则 - 确保列宽正确应用 */
  body .quotation-table th:nth-child(10),
  body .quotation-table td:nth-child(10) {
    width: 8% !important;
    min-width: 8% !important;
    max-width: 8% !important;
  } /* 小计 - 更高优先级 */

  body .quotation-table th:nth-child(11),
  body .quotation-table td:nth-child(11) {
    width: 6% !important;
    min-width: 6% !important;
    max-width: 6% !important;
  } /* 备注 - 更高优先级 */

  /* 打印时使用更大的宽度，减少两侧空白，确保居中对齐 */
  .quotation-preview {
    max-width: 100% !important;
    width: 100% !important;
    margin: 0 auto !important;
    padding: 0 !important;
    box-sizing: border-box !important;
  }

  /* 打印时表格：左侧不动，右侧稍微扩展 */
  .quotation-table,
  .total-summary-table {
    width: 102% !important;  /* 稍微增加宽度，让右边框向右移动一点 */
    margin: 0 !important;
    margin-left: 0 !important;  /* 左侧位置不动 */
    margin-right: auto !important;
    table-layout: fixed !important;
  }

  /* 强制表格容器宽度 */
  body .quotation-table {
    width: 102% !important;  /* 与上面保持一致 */
    margin: 0 !important;
    margin-left: 0 !important;
    margin-right: auto !important;
  }

  /* 确保表格容器宽度与表格一致 */
  #quotation-content .overflow-x-auto {
    width: 102% !important;  /* 与表格宽度保持一致 */
    margin: 0 !important;
    margin-left: 0 !important;
    margin-right: auto !important;
    overflow: visible !important;
  }

  .total-table .total-amount-col {
    width: 8% !important;
  }

  .total-table .total-spacer-1 {
    width: 6% !important;
  }

  .total-table td {
    border: none !important;
    padding: 2px !important;
  }
}
